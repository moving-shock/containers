{
  extends: [
    "config:base",
    ":enableRenovate",
    ":rebaseStalePrs",
    ":semanticCommits",
    ":separatePatchReleases",
    "docker:enableMajor",
    ":autodetectRangeStrategy",
    ":enablePreCommit"
  ],
  assignees: [
    "samejar"
  ],
  dependencyDashboard: true,
  dependencyDashboardTitle: "Renovate Dashboard ðŸ¤–",
  dependencyDashboardAutoclose: true,
  enabledManagers: [
    "npm",
    "nodenv",
    "dockerfile",
    "kubernetes",
    "gradle",
    "argocd",
    "github-actions",
    "gradle-wrapper",
    "helm-requirements",
    "helm-values",
    "helmfile",
    "helmv3",
//    "kotlin-script",
//    "tekton",
    "terraform",
    "terraform-version",
    "pre-commit",
    "regex"
  ],
  labels: [
    "dependencies"
  ],
  platform: "github",
  repositories: [
    "moving-shock/containers"
  ],
  //Rules for major
  major: {
    dependencyDashboardApproval: true
  },
  // Set up Renovate Managers
  // Explicit K8s filematch
  kubernetes: {
    fileMatch: [
      "k8s/.+\\.yaml"
    ]
  },
  regexManagers: [
    {
      "fileMatch": ["(^|/|\\.)Dockerfile$", "(^|/)Dockerfile\\.[^/]*$"],
      "matchStrings": [
        "# renovate: datasource=(?<datasource>[a-z-]+?) depName=(?<depName>.+?)(?: versioning=(?<versioning>[a-z-]+?))?\\s(?:ENV|ARG) .+?_VERSION=(?<currentValue>.+?)\\s"
      ],
      "versioningTemplate": "{{#if versioning}}{{versioning}}{{else}}semver{{/if}}"
    },
  ],
  packageRules: [
    // Setup datasources
    {
      "matchDatasources": [
        "npm"
      ],
      "stabilityDays": 3
    },
    {
      matchDatasources: [
        "helm"
      ],
      "stabilityDays": 7,
      ignoreDeprecated: true,
    },
    // Custom version schemes
    {
      matchPackageNames: [
        "kubernetes/ingress-nginx"
      ],
      versioning: "regex:^(?<compatibility>.*)v(?<major>\\d+)(\\.(?<minor>\\d+))?(\\.(?<patch>\\d+))?$"
    },
    {
      matchDatasources: [
        "docker"
      ],
      matchPackageNames: [
        "quay.io/minio/minio"
      ],
      versioning: "regex:^RELEASE\\.(?<major>\\d{4})-(?<minor>\\d{2})-(?<patch>\\d{2})",
    },
  ]
}
